<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Poiz Exchange</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 0; padding: 16px; }
    .row { margin-bottom: 12px; }
    .chips { display:flex; gap:8px; flex-wrap: wrap; margin: 8px 0; }
    .chip { padding:8px 12px; border:1px solid #ccc; border-radius:12px; background:#fff; cursor:pointer; }
    .chip.active { border-color:#000; font-weight:600; }
    .tiles { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:8px; min-height: 80px; }
    .tile { display:flex; gap:8px; align-items:center; border:1px solid #eee; border-radius:10px; padding:8px; background:#fafafa; cursor:pointer; }
    .tile.active { outline:2px solid #333; background:#fff; }
    .tile .ico { width:24px; height:24px; display:flex; align-items:center; justify-content:center; }
    .tile .ico img { max-width:24px; max-height:24px; }
    .muted { color:#666; font-size: 14px; }
    .box { border:1px solid #eee; border-radius:12px; padding:12px; }
    .hidden { display:none; }
    label { display:block; font-size: 14px; margin-bottom: 6px; color:#333; }
    input, select, textarea, button { width:100%; padding:10px; border:1px solid #ddd; border-radius:10px; box-sizing:border-box; }
    button.primary { background:#111; color:#fff; border-color:#111; }
  </style>
</head>
<body>

  <h2>Обмен</h2>

  <!-- ОТДАЮ -->
  <div class="row box">
    <label>Отдаю</label>
    <div id="from-pay" class="chips">
      <button class="chip" data-type="cash">Наличные</button>
      <button class="chip" data-type="bank">Банк РФ</button>
      <button class="chip" data-type="crypto">Крипто</button>
    </div>

    <div id="from-citybox" class="row">
      <label for="cityFrom">Город (наличные):</label>
      <select id="cityFrom">
        <option value="moscow">Москва</option>
        <option value="guangzhou">Гуанчжоу</option>
      </select>
    </div>

    <div id="from-currencies" class="tiles"></div>
    <div id="from-empty" class="muted hidden">Нет доступных вариантов</div>
  </div>

  <!-- ПОЛУЧАЮ -->
  <div class="row box">
    <label>Получаю</label>
    <div id="to-pay" class="chips">
      <button class="chip" data-type="cash">Наличные</button>
      <button class="chip" data-type="bank">Банк РФ</button>
      <button class="chip" data-type="crypto">Крипто</button>
      <button class="chip" data-type="cnpay">Китай</button>
    </div>

    <div id="to-citybox" class="row">
      <label for="cityTo">Город (наличные):</label>
      <select id="cityTo">
        <option value="moscow">Москва</option>
        <option value="guangzhou">Гуанчжоу</option>
      </select>
    </div>

    <div id="to-currencies" class="tiles"></div>
    <div id="to-empty" class="muted hidden">Нет доступных вариантов</div>
  </div>

  <!-- Суммы -->
  <div class="row box">
    <div class="row">
      <label for="amount">Сумма</label>
      <input id="amount" type="number" min="0" step="0.01" placeholder="0.00">
    </div>
    <div class="row">
      <div class="muted">Курс: <span id="rateVal">—</span></div>
      <div class="muted">К получению: <span id="totalVal">—</span></div>
    </div>
  </div>

  <!-- Контакты -->
  <div class="row box">
    <div class="row">
      <label for="contact">Контакт (телеграм/телефон)</label>
      <input id="contact" type="text" placeholder="@username или телефон">
    </div>
    <div class="row">
      <label for="requisites">Реквизиты для получения</label>
      <textarea id="requisites" rows="2" placeholder="Карта/кошелёк/данные..."></textarea>
    </div>
    <div class="row">
      <label for="note">Комментарий</label>
      <textarea id="note" rows="2" placeholder="Примечания..."></textarea>
    </div>
    <div id="qrbox" class="row hidden">
      <label for="qrfile">QR (для Alipay/WeChat/Карта Китая)</label>
      <input id="qrfile" type="file" accept="image/*">
    </div>
    <button id="sendBtn" class="primary">Отправить заявку</button>
  </div>

  <div id="hint" class="muted hidden">Откройте через Telegram, чтобы отправить заявку.</div>

  <!-- ВАЖНО: сначала pricing.js, потом index.js -->
  <script src="./pricing.js"></script>
  <script src="./index.js"></script>
</body>
</html>
