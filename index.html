<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- важно для Telegram WebApp -->
  <meta name="telegram-web-app" content="on" />
  <title>Poiz Exchange</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;margin:0;padding:16px;background:#0e1117;color:#e6e6e6}
    .row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px}
    .box{background:#151a23;border:1px solid #222838;border-radius:12px;padding:12px;flex:1 1 360px;min-width:300px}
    .h{font-weight:700;margin:0 0 8px 0}
    .chipbar{display:flex;gap:8px;flex-wrap:wrap}
    .chip{border:1px solid #2a3347;background:#171e2b;border-radius:999px;padding:8px 12px;cursor:pointer}
    .chip.active{border-color:#4b8cff;background:#1f2a3f}
    .tiles{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}
    .tile{display:flex;align-items:center;gap:8px;border:1px solid #2a3347;background:#161d2a;border-radius:10px;padding:10px;cursor:pointer}
    .tile.active{border-color:#4b8cff;background:#1e2a42}
    .ico img{width:24px;height:24px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    input,select,textarea{width:100%;background:#0f1420;border:1px solid #2a3347;border-radius:8px;color:#e6e6e6;padding:10px;box-sizing:border-box}
    textarea{min-height:80px}
    #sendBtn{width:100%;padding:14px 16px;border:0;border-radius:10px;background:#4b8cff;color:white;font-weight:700;font-size:16px;cursor:pointer}
    #sendBtn:disabled{opacity:.6;cursor:not-allowed}
    .hint{padding:10px;border:1px dashed #3b4660;border-radius:10px;background:#0f1420;margin-bottom:12px}
    .hidden{display:none}
  </style>
</head>
<body>
  <div id="notInTg" class="hint hidden">
    Эта форма должна открываться внутри Telegram.  
    <a id="openInTgLink" href="#" style="color:#8ab4ff;font-weight:700;">Открыть в Telegram</a>
  </div>

  <div class="row">
    <div class="box">
      <p class="h">Отдаю</p>
      <div id="from-pay" class="chipbar">
        <button class="chip" data-type="cash">Наличные</button>
        <button class="chip" data-type="bank">Банк РФ</button>
        <button class="chip" data-type="crypto">Крипто</button>
      </div>
      <div id="from-citybox" class="row" style="margin-top:8px;">
        <div class="grid2" style="width:100%;">
          <label>Город
            <select id="cityFrom">
              <option value="moscow">Москва</option>
              <option value="guangzhou">Гуанчжоу</option>
            </select>
          </label>
        </div>
      </div>
      <div id="from-currencies" class="tiles" style="margin-top:8px;"></div>
    </div>

    <div class="box">
      <p class="h">Получаю</p>
      <div id="to-pay" class="chipbar">
        <button class="chip" data-type="cash">Наличные</button>
        <button class="chip" data-type="bank">Банк РФ</button>
        <button class="chip" data-type="crypto">Крипто</button>
        <button class="chip" data-type="cnpay">Китайские сервисы</button>
      </div>
      <div id="to-citybox" class="row" style="margin-top:8px;">
        <div class="grid2" style="width:100%;">
          <label>Город
            <select id="cityTo">
              <option value="moscow">Москва</option>
              <option value="guangzhou">Гуанчжоу</option>
            </select>
          </label>
        </div>
      </div>
      <div id="to-currencies" class="tiles" style="margin-top:8px;"></div>
    </div>
  </div>

  <div class="row">
    <div class="box">
      <p class="h">Сумма и расчёт</p>
      <div class="grid2">
        <label>Сумма
          <input id="amount" type="number" placeholder="0.00" min="0" step="0.01" />
        </label>
        <label>Курс
          <input id="rateVal" type="text" disabled placeholder="—" />
        </label>
      </div>
      <div class="grid2" style="margin-top:8px;">
        <label>К получению
          <input id="totalVal" type="text" disabled placeholder="—" />
        </label>
        <label>Фиксация курса (мин)
          <input id="fixMinutes" type="number" value="30" min="5" max="120" />
        </label>
      </div>
    </div>

    <div class="box">
      <p class="h">Контакты</p>
      <div class="grid2">
        <label>Как с вами связаться?
          <input id="contact" placeholder="@username, телефон, WeChat..." />
        </label>
        <label>Реквизиты (если нужны)
          <input id="requisites" placeholder="Номер карты/кошелька" />
        </label>
      </div>
      <label style="margin-top:8px;">Комментарий
        <textarea id="note" placeholder="Ваши пожелания..."></textarea>
      </label>

      <div id="qrbox" class="hint hidden" style="margin-top:8px;">
        Если получаете в Alipay / WeChat / карта Китая — вы можете приложить QR (опционально):
        <input id="qrfile" type="file" accept="image/*" />
      </div>
    </div>
  </div>

  <button id="sendBtn">Отправить заявку</button>

  <!-- Иконки разместите в /icons/*.svg или поменяйте путь в pricing.js -->
  <script>
    // домен WebApp — чтобы генерировать deep-link при заходе не из Telegram
    window.WEBAPP_URL = "https://poizexchange.github.io/poizexchange";
    window.BOT_USERNAME = "PoizExchangeBot"; // имя вашего бота (без @)
  </script>
  <script src="./pricing.js"></script>
  <script src="./index.js"></script>
</body>
</html>

